<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Registro de Contratistas - Holcim</title>
<style>
/* Usa el mismo CSS que Visitantes */
body { font-family: "Segoe UI", Arial; background: #f0f3f7; margin: 0; padding: 20px; }
h1 { color: #005baa; text-align: center; }
form { background: white; padding: 15px; border-radius: 10px; max-width: 500px; margin: 0 auto 20px auto; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
label { display: block; margin: 8px 0 4px; font-weight: bold; }
input { width: 100%; padding: 6px; border-radius: 6px; border: 1px solid #ccc; margin-bottom: 8px; }
button { padding: 8px 16px; background: #005baa; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; transition: background 0.2s; }
button:hover { background: #004b8c; }
table { width: 90%; margin: 20px auto; border-collapse: collapse; background: white; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border-radius: 10px; overflow: hidden; }
th, td { padding: 10px; text-align: center; border-bottom: 1px solid #ddd; }
th { background: #005baa; color: white; }
tr:hover { background: #f5f5f5; }
.exit-form { margin: 0; }
.menu-btn { text-align: center; margin-bottom: 10px; }
</style>
</head>
<body>

<h1>Registro de Contratistas - Holcim</h1>
<div class="menu-btn">
    <button onclick="location.href='/'">Menú Principal</button>
</div>

<form method="POST">
    <label>Nombre:</label><input type="text" name="nombre" required>
    <label>Cédula:</label><input type="text" name="cedula" required>
    <label>Empresa:</label><input type="text" name="empresa" required>
    <label>Responsable:</label><input type="text" name="responsable" required>
    <label>Motivo del trabajo:</label><input type="text" name="motivo" required>
    <button type="submit">Registrar Ingreso</button>
</form>

{% if contractors %}
<table>
    <tr>
        <th>#</th><th>Nombre</th><th>Cédula</th><th>Empresa</th><th>Responsable</th><th>Motivo</th><th>Hora Ingreso</th><th>Hora Salida</th><th>Acciones</th>
    </tr>
    {% for c in contractors %}
    <tr>
        <td>{{ loop.index }}</td><td>{{ c.nombre }}</td><td>{{ c.cedula }}</td><td>{{ c.empresa }}</td><td>{{ c.responsable }}</td><td>{{ c.motivo }}</td><td>{{ c.hora_ingreso }}</td><td>{{ c.hora_salida or '-' }}</td>
        <td>
            {% if not c.hora_salida %}
            <form class="exit-form" method="GET" action="{{ url_for('salida_contratista', index=loop.index0) }}">
                <button type="submit">Dar Salida</button>
            </form>
            {% else %}-{% endif %}
        </td>
    </tr>
    {% endfor %}
</table>
{% endif %}

</body>
</html>

